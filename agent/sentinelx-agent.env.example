# /etc/sentinelx-agent.env
# Copia este archivo a /etc/sentinelx-agent.env y ajusta valores.

# URL completa al endpoint
SENTINELX_INGEST_URL="https://api.example.com/logs/ingest"

# API KEY (secreto)
SENTINELX_API_KEY="REPLACE_WITH_YOUR_KEY"

# Opcional: forzar modo ("cpanel" | "directadmin" | "auto")
SENTINELX_MODE="auto"

# Auto instalar dependencias si falta algo (solo si corre como root)
# 1 = pedir permiso e instalar, 0 = solo avisar y fallar
SENTINELX_AUTO_INSTALL_DEPS="1"

# Primer run (TAIL MODE)
SENTINELX_FIRST_RUN_CONTEXT_LINES="200"
SENTINELX_FIRST_RUN_BACKFILL_MB="50"
SENTINELX_FIRST_RUN_SCAN_MB="64"

# Chunk base por iteración (por archivo). 50MB suele ir bien.
SENTINELX_CHUNK_MB="50"

# Limitar ancho de banda (curl). Vacío = sin límite.
SENTINELX_LIMIT_RATE=""

# Timeouts
SENTINELX_CONNECT_TIMEOUT="10"
SENTINELX_MAX_TIME="7200"

# Corte por tiempo de corrida
SENTINELX_MAX_SECONDS_PER_RUN="3300"

# Pausa entre envíos
SENTINELX_SLEEP_BETWEEN_SENDS="0"

# SAR backfill (0 deshabilita)
SENTINELX_SAR_BACKFILL_DAYS="3"

# Cuánto escanear hacia atrás para encontrar '\n' antes del corte
SENTINELX_MAX_NEWLINE_SCAN_BYTES="1048576"

# cuánto escanear hacia adelante para capturar líneas largas completas sin cortarlas
SENTINELX_MAX_FORWARD_SCAN_BYTES="8388608"

# python a usar
SENTINELX_PYTHON_BIN="python3"

# Si el backend no responde (http_code=000):
# 1 = purga spool + resetea states + no encola
# 0 = continúa y podría encolar
SENTINELX_RESET_ON_BACKEND_DOWN="1"

# (Opcional) rutas internas
STATE_DIR="/var/lib/sentinelx-agent"
SPOOL_DIR="/var/spool/sentinelx-agent"
TMP_DIR="/tmp/sentinelx-agent"
SENTINELX_LOCK_FILE="/var/lock/sentinelx-agent.lock"

# (Opcional) archivo de sources personalizado:
# SOURCES_FILE="/etc/sentinelx-agent.sources"

